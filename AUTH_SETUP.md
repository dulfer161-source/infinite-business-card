# üîê –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ VK –∏ Telegram —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –∫–æ–¥–µ. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ Yandex Cloud.

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

1. **–ö–æ–¥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–ö–æ–¥ –±—ç–∫–µ–Ω–¥–∞** ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ VK –∏ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã
3. **–°–µ–∫—Ä–µ—Ç—ã —Å–æ–∑–¥–∞–Ω—ã** ‚Äî –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å

### 1. VK OAuth (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

–î–ª—è —Ä–∞–±–æ—Ç—ã VK –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω—É–∂–Ω—ã –¥–≤–∞ —Å–µ–∫—Ä–µ—Ç–∞:

**`VK_APP_ID`** ‚Äî ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è VK
- –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ https://dev.vk.com/apps
- –¢–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: **Standalone**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

**`VK_SECRET_KEY`** ‚Äî –ó–∞—â–∏—â—ë–Ω–Ω—ã–π –∫–ª—é—á VK
- –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞–π–¥–∏—Ç–µ **–ó–∞—â–∏—â—ë–Ω–Ω—ã–π –∫–ª—é—á**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è VK:**
- **–î–æ–≤–µ—Ä–µ–Ω–Ω—ã–π redirect URI**: `https://visitka.site/auth/vk`
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: email (–±–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø)

### 2. Telegram Widget (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**`TELEGRAM_BOT_TOKEN`** ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram
- –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
- –ö–æ–º–∞–Ω–¥–∞: `/newbot`
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤–∏–¥–∞: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –±–æ—Ç–∞: `/setdomain` ‚Üí `visitka.site`

**–í–∞–∂–Ω–æ:** –ò–º—è –±–æ—Ç–∞ –≤ –∫–æ–¥–µ ‚Äî `Visitka_sitebot` (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `SocialAuthButtons.tsx:27`)

### 3. JWT Secret (—É–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω)

**`JWT_SECRET`** ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ —Ç–æ–∫–µ–Ω–æ–≤
- –ú–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞, hex —Å—Ç—Ä–æ–∫–∞
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π: `openssl rand -hex 32`

## üöÄ –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Yandex Cloud Console**: https://console.yandex.cloud
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Cloud Functions** ‚Üí **Secrets Manager**
3. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç –ø–æ –∏–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `VK_APP_ID`)
4. –ù–∞–∂–º–∏—Ç–µ **–ò–∑–º–µ–Ω–∏—Ç—å** ‚Üí –≤—Å—Ç–∞–≤—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### VK OAuth:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç visitka.site
2. –ù–∞–∂–º–∏—Ç–µ **–í–æ–π—Ç–∏** ‚Üí **VK ID**
3. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ VK
4. –î–æ–ª–∂–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ `/auth/vk` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥

### Telegram Widget:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç visitka.site
2. –í–Ω–∏–∑—É —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ **Login with Telegram**
3. –ù–∞–∂–º–∏—Ç–µ ‚Üí –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ Telegram ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### VK –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `VK_APP_ID` –∏ `VK_SECRET_KEY` –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `redirect_uri` –≤ VK –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: `https://visitka.site/auth/vk`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ frontend (F12 ‚Üí Console)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend: `backend/vk-auth`

### Telegram –≤–∏–¥–∂–µ—Ç –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_BOT_TOKEN` –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω –±–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω: `/setdomain` ‚Üí `visitka.site`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è –±–æ—Ç–∞ –≤ –∫–æ–¥–µ: `SocialAuthButtons.tsx:27`

### –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `users` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend —Ñ—É–Ω–∫—Ü–∏–π

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ `users`:

```sql
CREATE TABLE t_p18253922_infinite_business_ca.users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(255) UNIQUE,
  name VARCHAR(255),
  vk_id VARCHAR(50),          -- –¥–ª—è VK OAuth
  telegram_id VARCHAR(50),    -- –¥–ª—è Telegram
  avatar TEXT,
  provider VARCHAR(50),
  created_at TIMESTAMP DEFAULT NOW()
);
```

VK –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–∞–∫–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –≤–∏–∑–∏—Ç–∫—É –≤ —Ç–∞–±–ª–∏—Ü–µ `cards`.

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- VK –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: https://dev.vk.com
- Telegram Bot API: https://core.telegram.org/bots
- Yandex Cloud Console: https://console.yandex.cloud
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è JWT: https://jwt.io

---

**–°—Ç–∞—Ç—É—Å**: –ö–æ–¥ –≥–æ—Ç–æ–≤, –æ—Å—Ç–∞–ª–æ—Å—å –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ Yandex Cloud.
